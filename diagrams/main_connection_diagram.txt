+------------------------------------------------------------------------------------------------------------------------+
|                                  Terraform GCP YugabyteDB - Complete Architecture                                      |
+------------------------------------------------------------------------------------------------------------------------+

                 +-------------------+
                 |  Client Apps      |
                 +--------+----------+
                          |
                          v
+-----------------------------------------------------------------------------------------------------------------+
|                                           Google Cloud Platform                                                  |
|                                                                                                                  |
|  +------------------------------+                              +----------------------------+                    |
|  |        Networking            |                              |         Compute            |                    |
|  |                              |                              |                            |                    |
|  |  +---------------------+     |                              |  +---------------------+   |                    |
|  |  | VPC Network         |     |                              |  | YugabyteDB Cluster  |   |                    |
|  |  |                     |     |                              |  |                     |   |                    |
|  |  |  +---------------+  |     |                              |  |  Zone 1  Zone 2  Zone 3 |                    |
|  |  |  |Public Subnet  |  |     |                              |  |  +--+    +--+    +--+   |                    |
|  |  |  |               |  |     |                              |  |  |N1|    |N2|    |N3|   |                    |
|  |  |  | Bastion Host  |  |     |                              |  |  +--+    +--+    +--+   |                    |
|  |  |  | NAT Gateway   |  |     |       +------------------+   |  |                     |   |                    |
|  |  |  +---------------+  |     |       |                  |   |  |  Managed Instance   |   |                    |
|  |  |                     |<----|------>| Internal         |<--|---->  Group            |   |                    |
|  |  |  +---------------+  |     |       | Load Balancer    |   |  |                     |   |                    |
|  |  |  |Private Subnet |  |     |       |                  |   |  |  Auto-Healing       |   |                    |
|  |  |  |               |  |     |       +------------------+   |  |  Health Checks      |   |                    |
|  |  |  |  YugabyteDB   |  |     |                              |  +---------------------+   |                    |
|  |  |  |  Nodes        |  |     |                              |                            |                    |
|  |  |  +---------------+  |     |                              +----------------------------+                    |
|  |  |                     |     |                                                                                |
|  |  |  +---------------+  |     |    +------------------+      +------------------+     +------------------+     |
|  |  |  |Firewall Rules |  |     |    |                  |      |                  |     |                  |     |
|  |  |  |               |  |     |    |  Cloud KMS       |      |  IAM & Security  |     |  Cloud Storage   |     |
|  |  |  | - Internal    |  |     |    |                  |      |                  |     |                  |     |
|  |  |  | - SSH Access  |  |     |    |  - Disk          |      |  - Service       |     |  - Backups       |     |
|  |  |  | - DB Ports    |  |     |    |    Encryption    |      |    Accounts      |     |  - Startup       |     |
|  |  |  +---------------+  |     |    |                  |      |  - Workload      |     |    Scripts       |     |
|  |  +---------------------+     |    +------------------+      |    Identity      |     |                  |     |
|  +------------------------------+                              +------------------+     +------------------+     |
|                                                                                                                  |
+-----------------------------------------------------------------------------------------------------------------+

                          ^                               ^                              ^
                          |                               |                              |
                          v                               v                              v

+-----------------------------------------------------------------------------------------------------------------+
|                                          Terraform Configuration                                                 |
|                                                                                                                  |
|  +----------------+    +----------------+    +----------------+                                                  |
|  |    main.tf     |    | variables.tf   |    |  outputs.tf    |                                                  |
|  +-------+--------+    +--------+-------+    +--------+-------+                                                  |
|          |                      |                     |                                                          |
|          v                      v                     v                                                          |
|  +-----------------------------------------------------------------------------------+                           |
|  |                                   Modules                                         |                           |
|  |                                                                                   |                           |
|  |  +------------------+    +------------------+    +------------------+             |                           |
|  |  |  VPC Module      |    |  IAM Module      |    | YugabyteDB Module|             |                           |
|  |  |                  |    |                  |    |                  |             |                           |
|  |  | - Network        |    | - Service        |    | - VM Management  |             |                           |
|  |  | - Subnets        |    |   Accounts       |    | - Disk Creation  |             |                           |
|  |  | - NAT            |    | - IAM Roles      |    | - Load Balancer  |             |                           |
|  |  | - Firewall Rules |    | - Workload       |    | - Health Checks  |             |                           |
|  |  |                  |    |   Identity       |    | - Startup Script |             |                           |
|  |  +------------------+    +------------------+    +------------------+             |                           |
|  |           |                      |                        |                       |                           |
|  +-----------+----------------------+------------------------+-----------------------+                           |
|              |                      |                        |                                                   |
|              v                      v                        v                                                   |
|  +-----------------------------------------------------------------------------------+                           |
|  |                             Security Features                                     |                           |
|  |                                                                                   |                           |
|  |  +------------------+    +------------------+    +------------------+             |                           |
|  |  | Network Security |    |  Identity & Access|    | Data Security   |             |                           |
|  |  |                  |    |                  |    |                  |             |                           |
|  |  | - Private Subnets|    | - Workload       |    | - KMS Encryption |             |                           |
|  |  | - Firewall Rules |    |   Identity       |    | - Backups        |             |                           |
|  |  | - VPC Flow Logs  |    | - Minimal IAM    |    | - Secure Boot    |             |                           |
|  |  | - Bastion Host   |    | - Service Accts  |    | - Shielded VMs   |             |                           |
|  |  +------------------+    +------------------+    +------------------+             |                           |
|  +-----------------------------------------------------------------------------------+                           |
|                                                                                                                  |
+-----------------------------------------------------------------------------------------------------------------+ 